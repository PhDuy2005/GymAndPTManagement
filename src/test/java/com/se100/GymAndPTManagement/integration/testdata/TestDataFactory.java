/**
 * Test data builder utilities - simplified version
 * Generated by: GitHub Copilot (Claude Haiku 4.5)
 * Created by: KStuv
 * Created at: 2026-01-16 11:30:00
 * Purpose: Provide test data creation without Lombok complexity
 */
package com.se100.GymAndPTManagement.integration.testdata;

import com.se100.GymAndPTManagement.domain.table.*;
import com.se100.GymAndPTManagement.util.enums.*;

import java.math.BigDecimal;
import java.time.LocalDate;
import java.time.LocalTime;

public class TestDataFactory {

    private static int slotCounter = 0;
    private static long memberCounter = 0;

    public static User createUser(String email, String fullname) {
        User user = new User();
        user.setEmail(email);
        user.setPasswordHash("test123");
        user.setFullname(fullname);
        user.setPhoneNumber("0123456789");
        user.setStatus(UserStatusEnum.ACTIVE);
        user.setGender(GenderEnum.MALE);
        return user;
    }

    public static Member createMember(User user) {
        memberCounter++;
        Member member = new Member();
        member.setUser(user);
        // Generate unique CCCD by padding counter: 000000000001, 000000000002, etc.
        member.setCccd(String.format("%012d", memberCounter));
        member.setMoneySpent(BigDecimal.ZERO);
        member.setMoneyDebt(BigDecimal.ZERO);
        member.setJoinDate(LocalDate.now());
        return member;
    }

    public static PersonalTrainer createPersonalTrainer(User user) {
        PersonalTrainer pt = new PersonalTrainer();
        pt.setUser(user);
        pt.setSpecialization("Fitness");
        pt.setExperienceYears(5);
        pt.setStatus(PTStatusEnum.AVAILABLE);
        pt.setRating(BigDecimal.ZERO);
        return pt;
    }

    public static ServicePackage createServicePackage() {
        ServicePackage pkg = new ServicePackage();
        pkg.setPackageName("Test Package");
        pkg.setDurationInDays(30);
        pkg.setPrice(BigDecimal.valueOf(1000000));
        pkg.setType(PackageTypeEnum.PT_INCLUDED);
        pkg.setIsActive(true);
        return pkg;
    }

    public static Contract createContract(Member member, PersonalTrainer pt, ServicePackage pkg) {
        Contract contract = new Contract();
        contract.setMember(member);
        contract.setMainPt(pt);
        contract.setServicePackage(pkg);
        contract.setStartDate(LocalDate.now());
        contract.setEndDate(LocalDate.now().plusDays(30));
        contract.setStatus(ContractStatusEnum.ACTIVE);
        contract.setTotalSessions(10);
        contract.setRemainingSessions(10);
        return contract;
    }

    public static Slot createSlot() {
        Slot slot = new Slot();
        slotCounter++;
        slot.setSlotName("Test Slot " + slotCounter);
        slot.setStartTime(LocalTime.of(9, 0));
        slot.setEndTime(LocalTime.of(10, 0));
        slot.setIsActive(true);
        return slot;
    }

    public static AvailableSlot createAvailableSlot(PersonalTrainer pt, Slot slot) {
        AvailableSlot availSlot = new AvailableSlot();
        availSlot.setPersonalTrainer(pt);
        availSlot.setSlot(slot);
        availSlot.setDayOfWeek(DayOfWeekEnum.MONDAY);
        availSlot.setIsAvailable(true);
        return availSlot;
    }

    public static Booking createBooking(Contract contract, Member member, PersonalTrainer pt, Slot slot) {
        Booking booking = new Booking();
        booking.setContract(contract);
        booking.setMember(member);
        booking.setRealPt(pt);
        booking.setSlot(slot);
        booking.setBookingDate(LocalDate.now());
        return booking;
    }

    public static CheckinLog createCheckinLog(Booking booking, Member member) {
        CheckinLog log = new CheckinLog();
        log.setBooking(booking);
        log.setMember(member);
        log.setCheckinTime(LocalTime.now());
        log.setStatus("CHECKED_IN");
        return log;
    }
}
