package com.se100.GymAndPTManagement.domain.responseDTO;

import java.time.Instant;
import java.time.LocalTime;

import com.se100.GymAndPTManagement.domain.table.AvailableSlot;
import com.se100.GymAndPTManagement.util.enums.DayOfWeekEnum;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

/**
 * Generated by: GitHub Copilot (Claude Haiku 4.5)
 * Created by: PhDuy2005
 * Created at: 2026-01-19
 * Purpose: Response DTO for available slot by user ID
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class ResAvailableSlotByUserDTO {
    private Long id;
    private User user;
    private Slot slot;
    private DayOfWeekEnum dayOfWeek;
    private Boolean isAvailable;

    private Instant createdAt;
    private Instant updatedAt;
    private String createdBy;
    private String updatedBy;

    @Data
    @NoArgsConstructor
    @AllArgsConstructor
    @Builder
    public static class User {
        private Long userId;
        private String userName;
        private String userFullname;
    }

    @Data
    @NoArgsConstructor
    @AllArgsConstructor
    @Builder
    public static class Slot {
        private Long slotId;
        private String slotName;
        private LocalTime startTime;
        private LocalTime endTime;
    }

    public static ResAvailableSlotByUserDTO fromEntity(AvailableSlot availableSlot) {
        return ResAvailableSlotByUserDTO.builder()
                .id(availableSlot.getId())
                .user(User.builder()
                        .userId(availableSlot.getUser().getId())
                        .userName(availableSlot.getUser().getEmail())
                        .userFullname(availableSlot.getUser().getFullname())
                        .build())
                .slot(Slot.builder()
                        .slotId(availableSlot.getSlot().getId())
                        .slotName(availableSlot.getSlot().getSlotName())
                        .startTime(availableSlot.getSlot().getStartTime())
                        .endTime(availableSlot.getSlot().getEndTime())
                        .build())
                .dayOfWeek(availableSlot.getDayOfWeek())
                .isAvailable(availableSlot.getIsAvailable())
                .createdAt(availableSlot.getCreatedAt())
                .updatedAt(availableSlot.getUpdatedAt())
                .createdBy(availableSlot.getCreatedBy())
                .updatedBy(availableSlot.getUpdatedBy())
                .build();
    }
}
