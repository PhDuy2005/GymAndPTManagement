package com.se100.GymAndPTManagement.domain.responseDTO;

import java.math.BigDecimal;
import java.time.Instant;
import java.time.LocalDate;

import com.se100.GymAndPTManagement.domain.table.BodyMetrics;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

/**
 * Generated by: GitHub Copilot (Claude Sonnet 4.5)
 * Created by: PhDuy2005
 * Created at: 2026-01-14 12:00:00
 * Purpose: Response DTO for body metrics
 */
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class ResBodyMetricsDTO {

    private Long id;
    private Member member;
    private MeasuredBy measuredBy;
    private LocalDate measuredDate;
    private BigDecimal weight;
    private BigDecimal height;
    private BigDecimal muscleMass;
    private BigDecimal bodyFatPercentage;
    private BigDecimal bmi;
    private Instant createdAt;
    private Instant updatedAt;
    private String createdBy;
    private String updatedBy;

    @Data
    @Builder
    @NoArgsConstructor
    @AllArgsConstructor
    public static class Member {
        private Long memberId;
        private String fullname;
    }

    @Data
    @Builder
    @NoArgsConstructor
    @AllArgsConstructor
    public static class MeasuredBy {
        private Long userId;
        private String fullname;
    }

    public static ResBodyMetricsDTO fromEntity(BodyMetrics entity) {
        if (entity == null) {
            return null;
        }

        Member member = Member.builder()
                .memberId(entity.getMember().getId())
                .fullname(entity.getMember().getUser().getFullname())
                .build();

        MeasuredBy measuredBy = null;
        if (entity.getMeasuredBy() != null) {
            measuredBy = MeasuredBy.builder()
                    .userId(entity.getMeasuredBy().getId())
                    .fullname(entity.getMeasuredBy().getFullname())
                    .build();
        }

        return ResBodyMetricsDTO.builder()
                .id(entity.getId())
                .member(member)
                .measuredBy(measuredBy)
                .measuredDate(entity.getMeasuredDate())
                .weight(entity.getWeight())
                .height(entity.getHeight())
                .muscleMass(entity.getMuscleMass())
                .bodyFatPercentage(entity.getBodyFatPercentage())
                .bmi(entity.getBmi())
                .createdAt(entity.getCreatedAt())
                .updatedAt(entity.getUpdatedAt())
                .createdBy(entity.getCreatedBy())
                .updatedBy(entity.getUpdatedBy())
                .build();
    }
}
