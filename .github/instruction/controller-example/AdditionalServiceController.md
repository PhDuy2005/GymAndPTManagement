# AdditionalServiceController Documentation

> **Generated by**: GitHub Copilot (Claude Sonnet 4.5)  
> **Created by**: PhDuy2005  
> **Created at**: 2026-01-11 19:48:37  
> **Last Updated**: 2026-01-11 20:16:00  
> **Controller**: `AdditionalServiceController`  
> **Base URL**: `/api/v1/additional-services`

---

## üìã Overview

Controller qu·∫£n l√Ω c√°c d·ªãch v·ª• b·ªï sung (Additional Services) trong h·ªá th·ªëng Gym & PT Management.

**Ch·ª©c nƒÉng ch√≠nh**:
- Qu·∫£n l√Ω danh s√°ch d·ªãch v·ª• b·ªï sung (th√™m, s·ª≠a, x√≥a, xem)
- Qu·∫£n l√Ω gi√° cost v√† gi√° b√°n ƒë·ªÅ xu·∫•t
- Qu·∫£n l√Ω tr·∫°ng th√°i active/inactive
- L·ªçc d·ªãch v·ª• theo tr·∫°ng th√°i active

---

## üîó Endpoints

### 1. Create Additional Service
**POST** `/api/v1/additional-services`

**Description**: T·∫°o d·ªãch v·ª• b·ªï sung m·ªõi

**Request Body**:
```json
{
  "name": "N∆∞·ªõc u·ªëng b·ªï sung protein",
  "costPrice": 50000.00,
  "suggestSellPrice": 75000.00,
  "description": "N∆∞·ªõc u·ªëng protein whey cao c·∫•p"
}
```

**Success Response** (201 Created):
```json
{
  "statusCode": 201,
  "message": "Create new additional service",
  "data": {
    "id": 1,
    "name": "N∆∞·ªõc u·ªëng b·ªï sung protein",
    "costPrice": 50000.00,
    "suggestSellPrice": 75000.00,
    "description": "N∆∞·ªõc u·ªëng protein whey cao c·∫•p",
    "isActive": true,
    "createdAt": "2026-01-11T20:00:00Z",
    "createdBy": "admin"
  }
}
```

---

### 2. Get All Additional Services
**GET** `/api/v1/additional-services`

**Description**: L·∫•y danh s√°ch t·∫•t c·∫£ d·ªãch v·ª• b·ªï sung (bao g·ªìm c·∫£ active v√† inactive)

**Success Response** (200 OK):
```json
{
  "statusCode": 200,
  "message": "Get all additional services",
  "data": [
    {
      "id": 1,
      "name": "N∆∞·ªõc u·ªëng b·ªï sung protein",
      "costPrice": 50000.00,
      "suggestSellPrice": 75000.00,
      "description": "N∆∞·ªõc u·ªëng protein whey cao c·∫•p",
      "isActive": true,
      "createdAt": "2026-01-11T20:00:00Z"
    },
    {
      "id": 2,
      "name": "KhƒÉn lau m·ªì h√¥i",
      "costPrice": 10000.00,
      "suggestSellPrice": 15000.00,
      "description": "KhƒÉn th·ªÉ thao cao c·∫•p",
      "isActive": false,
      "createdAt": "2026-01-11T20:05:00Z"
    }
  ]
}
```

---

### 3. Get Additional Service by ID
**GET** `/api/v1/additional-services/{id}`

**Description**: L·∫•y th√¥ng tin chi ti·∫øt d·ªãch v·ª• b·ªï sung theo ID

**Path Parameters**:
- `id` (Long, required): ID c·ªßa d·ªãch v·ª• b·ªï sung

**Success Response** (200 OK):
```json
{
  "statusCode": 200,
  "message": "Get additional service by ID",
  "data": {
    "id": 1,
    "name": "N∆∞·ªõc u·ªëng b·ªï sung protein",
    "costPrice": 50000.00,
    "suggestSellPrice": 75000.00,
    "description": "N∆∞·ªõc u·ªëng protein whey cao c·∫•p",
    "isActive": true,
    "createdAt": "2026-01-11T20:00:00Z",
    "updatedAt": "2026-01-11T20:10:00Z",
    "createdBy": "admin",
    "updatedBy": "admin"
  }
}
```

**Error Response** (404 Not Found):
```json
{
  "statusCode": 404,
  "message": "Additional service not found with ID: 999",
  "data": null
}
```

---

### 4. Get All Active Additional Services
**GET** `/api/v1/additional-services/active`

**Description**: L·∫•y danh s√°ch t·∫•t c·∫£ d·ªãch v·ª• b·ªï sung ƒëang active (isActive = true)

**Success Response** (200 OK):
```json
{
  "statusCode": 200,
  "message": "Get all active additional services",
  "data": [
    {
      "id": 1,
      "name": "N∆∞·ªõc u·ªëng b·ªï sung protein",
      "costPrice": 50000.00,
      "suggestSellPrice": 75000.00,
      "description": "N∆∞·ªõc u·ªëng protein whey cao c·∫•p",
      "isActive": true,
      "createdAt": "2026-01-11T20:00:00Z"
    }
  ]
}
```

---

### 5. Activate Additional Service
**PUT** `/api/v1/additional-services/{id}/activate`

**Description**: K√≠ch ho·∫°t d·ªãch v·ª• b·ªï sung (set isActive = true)

**Path Parameters**:
- `id` (Long, required): ID c·ªßa d·ªãch v·ª• b·ªï sung

**Success Response** (200 OK):
```json
{
  "statusCode": 200,
  "message": "Activate additional service",
  "data": {
    "id": 2,
    "name": "KhƒÉn lau m·ªì h√¥i",
    "costPrice": 10000.00,
    "suggestSellPrice": 15000.00,
    "description": "KhƒÉn th·ªÉ thao cao c·∫•p",
    "isActive": true,
    "updatedAt": "2026-01-11T20:15:00Z",
    "updatedBy": "admin"
  }
}
```

**Error Response** (404 Not Found):
```json
{
  "statusCode": 404,
  "message": "Additional service not found with ID: 999",
  "data": null
}
```

---

### 6. Deactivate Additional Service
**DELETE** `/api/v1/additional-services/{id}`

**Description**: V√¥ hi·ªáu h√≥a d·ªãch v·ª• b·ªï sung (soft delete - set isActive = false)

**Path Parameters**:
- `id` (Long, required): ID c·ªßa d·ªãch v·ª• b·ªï sung

**Success Response** (204 No Content):
```
(No body)
```

**Error Response** (404 Not Found):
```json
{
  "statusCode": 404,
  "message": "Additional service not found with ID: 999",
  "data": null
}
```

---

## üö® Exceptions

### Common Exceptions

1. **IdInvalidException**
   - **Status Code**: 404
   - **Message**: "Additional service not found with ID: {id}"
   - **Trigger**: Khi kh√¥ng t√¨m th·∫•y d·ªãch v·ª• v·ªõi ID ƒë∆∞·ª£c cung c·∫•p
   - **Endpoints**: GET by ID, PUT activate, DELETE

2. **IllegalArgumentException**
   - **Status Code**: 400
   - **Message**: "Name is required" / "Invalid price value"
   - **Trigger**: Khi d·ªØ li·ªáu ƒë·∫ßu v√†o kh√¥ng h·ª£p l·ªá

3. **ValidationException**
   - **Status Code**: 400
   - **Message**: Chi ti·∫øt l·ªói validation t·ª´ DTO
   - **Trigger**: Khi vi ph·∫°m constraint c·ªßa DTO (@NotBlank, @DecimalMin)

---

## üìù Business Rules

1. **Gi√° c·∫£**:
   - `costPrice` v√† `suggestSellPrice` ph·∫£i >= 0 (n·∫øu ƒë∆∞·ª£c cung c·∫•p)
   - C·∫£ hai ƒë·ªÅu optional, c√≥ th·ªÉ null
   - `suggestSellPrice` n√™n l·ªõn h∆°n `costPrice` (recommended, kh√¥ng b·∫Øt bu·ªôc)

2. **T√™n d·ªãch v·ª•**:
   - B·∫Øt bu·ªôc ph·∫£i c√≥ (@NotBlank)
   - ƒê·ªô d√†i t·ªëi ƒëa: 255 k√Ω t·ª±

3. **Tr·∫°ng th√°i Active**:
   - M·∫∑c ƒë·ªãnh `isActive = true` khi t·∫°o m·ªõi
   - Soft delete: DELETE endpoint ch·ªâ set `isActive = false`, kh√¥ng x√≥a kh·ªèi DB
   - Endpoint `/active` ch·ªâ tr·∫£ v·ªÅ services c√≥ `isActive = true`

4. **Audit Fields**:
   - T·ª± ƒë·ªông ghi nh·∫≠n `createdAt`, `createdBy` khi t·∫°o m·ªõi
   - T·ª± ƒë·ªông c·∫≠p nh·∫≠t `updatedAt`, `updatedBy` khi ch·ªânh s·ª≠a

---

## üîê Security

- T·∫•t c·∫£ endpoints y√™u c·∫ßu authentication
- Role required: `ADMIN`, `MANAGER` (t√πy theo business requirement)
- Kh√¥ng c√≥ endpoint UPDATE (PUT update) - ch·ªâ c√≥ activate/deactivate

---

## üìä Logging

T·∫•t c·∫£ endpoints ƒë·ªÅu c√≥ logging theo format:
```
>>ADDITIONAL SERVICE CONTROLLER: {Action description} with {parameters}
```

**Examples**:
- `>>ADDITIONAL SERVICE CONTROLLER: Creating new additional service with name: N∆∞·ªõc u·ªëng protein`
- `>>ADDITIONAL SERVICE CONTROLLER: Created additional service with ID: 1`
- `>>ADDITIONAL SERVICE CONTROLLER: Retrieved all additional services, count: 5`
- `>>ADDITIONAL SERVICE CONTROLLER: Retrieved additional service with ID: 1`
- `>>ADDITIONAL SERVICE CONTROLLER: Retrieved all active additional services, count: 3`
- `>>ADDITIONAL SERVICE CONTROLLER: Activated additional service with ID: 2`
- `>>ADDITIONAL SERVICE CONTROLLER: Deactivated additional service with ID: 3`

---

## üìå Notes

1. **Soft Delete**: DELETE endpoint kh√¥ng x√≥a vƒ©nh vi·ªÖn d·ªØ li·ªáu, ch·ªâ ƒë·ªïi tr·∫°ng th√°i `isActive = false`
2. **No Update Endpoint**: Hi·ªán t·∫°i kh√¥ng c√≥ endpoint PUT ƒë·ªÉ update th√¥ng tin (name, price), ch·ªâ c√≥ activate/deactivate
3. **Optional Fields**: `costPrice`, `suggestSellPrice`, `description` ƒë·ªÅu l√† optional khi t·∫°o m·ªõi

---

**Version**: 1.1  
**Last Updated**: 2026-01-11 20:16:00
